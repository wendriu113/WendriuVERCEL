<%- include('header.ejs') %>

<section class="section products-container">
  <header>
    <h2 class="products-title">Produtos</h2>
  </header>

  <% if (!produtos || produtos.length === 0) { %>
  <p>Nenhum produto encontrado.</p>
  <% } else { %>
  <div class="products-grid">
    <% produtos.forEach(function(prod) { %>
    <div class="product-card">
      <div class="product-image-container">
        <% if (prod.imagem) { %>
        <img
          src="<%= prod.imagem %>"
          alt="<%= prod.nome %>"
          class="product-image"
          onerror="this.onerror=null;this.src='/images/placeholder.svg'"
        />
        <% } else { %>
        <div style="font-size: 28px">ðŸ“¦</div>
        <% } %>
      </div>
      <div class="product-content">
        <h3 class="product-name"><%= prod.nome %></h3>
        <p class="product-description"><%= prod.descricao || '' %></p>
        <div class="product-details">
          <div class="product-detail-row">
            PreÃ§o: R$ <%= (prod.preco||0).toFixed(2) %>
          </div>
          <div class="product-detail-row">
            Quantidade: <%= prod.quantidade || 0 %>
          </div>
          <div class="product-detail-row">
            Fornecedor: <%= (prod.fornecedor && prod.fornecedor.nome) ?
            prod.fornecedor.nome : (prod.fornecedor || '-') %>
          </div>
        </div>
      </div>
    </div>
    <% }) %>
  </div>
  <% } %>
</section>

<%- include('footer.ejs') %>
